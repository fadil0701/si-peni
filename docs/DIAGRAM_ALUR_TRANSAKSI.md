# ğŸ“Š Diagram Alur Transaksi Barang

## Flowchart Lengkap Transaksi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERMINTAAN BARANG                             â”‚
â”‚  (Pegawai/Kepala Unit/Kasubbag)                                 â”‚
â”‚                                                                  â”‚
â”‚  1. Buat Permintaan                                              â”‚
â”‚  2. Tambah Detail Item                                           â”‚
â”‚  3. Simpan Draft / Ajukan                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOW APPROVAL                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Kepala Unit  â”‚â”€â”€â”€â–¶â”‚ Kasubbag TU  â”‚â”€â”€â”€â–¶â”‚ Kepala Pusat â”‚      â”‚
â”‚  â”‚  Mengetahui  â”‚    â”‚  Verifikasi  â”‚    â”‚   Approve    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â”‚  Status: DIAJUKAN â†’ DIKETAHUI â†’ DIVERIFIKASI â†’ DISETUJUI        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISPOSISI                                     â”‚
â”‚  (Admin Gudang)                                                  â”‚
â”‚                                                                  â”‚
â”‚  Pilih Admin Gudang Kategori:                                    â”‚
â”‚  â€¢ Admin Gudang Aset                                             â”‚
â”‚  â€¢ Admin Gudang Persediaan                                       â”‚
â”‚  â€¢ Admin Gudang Farmasi                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROSES DISPOSISI                              â”‚
â”‚  (Admin Gudang Kategori)                                          â”‚
â”‚                                                                  â”‚
â”‚  1. Lihat Daftar Disposisi                                       â”‚
â”‚  2. Proses Disposisi                                             â”‚
â”‚  3. Pilih Inventory dari Gudang Pusat                           â”‚
â”‚  4. Tentukan Qty Distribusi                                     â”‚
â”‚  5. Simpan Draft Distribusi (Status: READY)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPILE SBBK                                  â”‚
â”‚  (Admin Gudang)                                                  â”‚
â”‚                                                                  â”‚
â”‚  1. Lihat Draft Ready                                            â”‚
â”‚  2. Compile menjadi SBBK                                        â”‚
â”‚  3. Tentukan Gudang Tujuan                                      â”‚
â”‚  4. Simpan SBBK (Status: DRAFT)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISTRIBUSI (KIRIM)                            â”‚
â”‚  (Admin Gudang)                                                  â”‚
â”‚                                                                  â”‚
â”‚  1. Lihat Daftar SBBK                                           â”‚
â”‚  2. Review Detail Distribusi                                     â”‚
â”‚  3. Kirim Barang (Status: DIKIRIM)                              â”‚
â”‚  4. Stok Gudang Asal Berkurang                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PENERIMAAN BARANG                             â”‚
â”‚  (Pegawai/Kepala Unit)                                           â”‚
â”‚                                                                  â”‚
â”‚  1. Lihat Daftar Distribusi DIKIRIM                              â”‚
â”‚  2. Verifikasi Fisik Barang                                      â”‚
â”‚  3. Terima Barang                                                â”‚
â”‚  4. Isi Detail Penerimaan                                        â”‚
â”‚  5. Simpan (Status: SELESAI)                                    â”‚
â”‚  6. Stok Gudang Tujuan Bertambah                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RETUR BARANG (OPSIONAL)                       â”‚
â”‚  (Pegawai/Kepala Unit)                                           â”‚
â”‚                                                                  â”‚
â”‚  1. Buat Retur dari Penerimaan                                   â”‚
â”‚  2. Pilih Item yang Diretur                                     â”‚
â”‚  3. Isi Alasan Retur                                             â”‚
â”‚  4. Ajukan Retur (Status: DIAJUKAN)                            â”‚
â”‚  5. Admin Gudang Terima Retur (Status: DITERIMA)               â”‚
â”‚  6. Stok Kembali ke Gudang Pusat                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Role & Permission Matrix

| Role | Permintaan | Approval | Disposisi | Compile | Distribusi | Penerimaan | Retur |
|------|-----------|----------|-----------|---------|------------|------------|-------|
| **Pegawai** | âœ… Create | âŒ | âŒ | âŒ | âŒ | âœ… Receive | âœ… Create |
| **Kepala Unit** | âœ… Create | âœ… Approve | ğŸ‘ï¸ View | âŒ | âŒ | âœ… Receive | âœ… Create |
| **Kasubbag TU** | âœ… Create | âœ… Verify | ğŸ‘ï¸ View | âŒ | âŒ | âŒ | âŒ |
| **Kepala Pusat** | âœ… Create | âœ… Approve | ğŸ‘ï¸ View | âŒ | âŒ | âŒ | âŒ |
| **Admin Gudang** | âœ… All | âœ… Disposisi | âœ… Process | âœ… Compile | âœ… Send | âœ… Receive | âœ… All |
| **Admin Gudang Aset** | âœ… All | âœ… View | âœ… Process | âŒ | âœ… Send | âœ… Receive | âœ… All |
| **Admin Gudang Persediaan** | âœ… All | âœ… View | âœ… Process | âŒ | âœ… Send | âœ… Receive | âœ… All |
| **Admin Gudang Farmasi** | âœ… All | âœ… View | âœ… Process | âŒ | âœ… Send | âœ… Receive | âœ… All |
| **Admin** | âœ… All | âœ… All | âœ… All | âœ… All | âœ… All | âœ… All | âœ… All |

**Legend:**
- âœ… = Full Access
- ğŸ‘ï¸ = View Only
- âŒ = No Access

## Status Flow Diagram

```
PERMINTAAN BARANG:
DRAFT â†’ DIAJUKAN â†’ DISETUJUI â†’ DIPROSES â†’ SELESAI
         â†“
      DITOLAK

APPROVAL:
MENUNGGU â†’ DIKETAHUI â†’ DIVERIFIKASI â†’ DISETUJUI â†’ DIPROSES
           â†“              â†“              â†“
         DITOLAK       DITOLAK       DITOLAK

DISTRIBUSI:
DRAFT â†’ DIKIRIM â†’ SELESAI

RETUR:
DRAFT â†’ DIAJUKAN â†’ DITERIMA
        â†“
     DITOLAK
```

## Decision Points

### 1. Setelah Permintaan Diajukan
```
Apakah Kepala Unit Setuju?
â”œâ”€ YES â†’ Lanjut ke Kasubbag TU
â””â”€ NO â†’ DITOLAK â†’ Kembali ke Pemohon
```

### 2. Setelah Verifikasi Kasubbag
```
Apakah Kasubbag Setuju?
â”œâ”€ YES â†’ Lanjut ke Kepala Pusat
â””â”€ NO â†’ DITOLAK â†’ Kembali ke Pemohon
```

### 3. Setelah Approval Kepala Pusat
```
Apakah Kepala Pusat Setuju?
â”œâ”€ YES â†’ Disposisi ke Admin Gudang Kategori
â””â”€ NO â†’ DITOLAK â†’ Kembali ke Pemohon
```

### 4. Saat Proses Disposisi
```
Apakah Stok Tersedia?
â”œâ”€ YES â†’ Buat Draft Distribusi
â””â”€ NO â†’ Tidak bisa diproses (tunggu stok tersedia)
```

### 5. Saat Penerimaan
```
Apakah Barang Sesuai?
â”œâ”€ SESUAI â†’ Terima â†’ SELESAI
â”œâ”€ KURANG â†’ Terima dengan catatan â†’ SELESAI
â”œâ”€ LEBIH â†’ Terima dengan catatan â†’ SELESAI
â””â”€ RUSAK â†’ Terima dengan catatan â†’ SELESAI (atau Retur)
```

### 6. Setelah Penerimaan
```
Apakah Perlu Retur?
â”œâ”€ YES â†’ Buat Retur Barang
â””â”€ NO â†’ Transaksi Selesai
```

## Data Flow

```
PERMINTAAN BARANG
    â”‚
    â”œâ”€â†’ detail_permintaan_barang (items)
    â”‚
    â””â”€â†’ approval_log (workflow)

DISPOSISI
    â”‚
    â””â”€â†’ draft_detail_distribusi (items ready)

COMPILE SBBK
    â”‚
    â”œâ”€â†’ transaksi_distribusi (header)
    â””â”€â†’ detail_distribusi (items)

DISTRIBUSI
    â”‚
    â”œâ”€â†’ Update stok gudang asal (kurang)
    â””â”€â†’ Status: DIKIRIM

PENERIMAAN
    â”‚
    â”œâ”€â†’ penerimaan_barang (header)
    â”œâ”€â†’ detail_penerimaan_barang (items)
    â”œâ”€â†’ Update stok gudang tujuan (tambah)
    â””â”€â†’ Status: SELESAI

RETUR (jika ada)
    â”‚
    â”œâ”€â†’ retur_barang (header)
    â”œâ”€â†’ detail_retur_barang (items)
    â”œâ”€â†’ Update stok gudang pusat (tambah)
    â””â”€â†’ Update stok gudang unit (kurang)
```

## Timeline Estimasi

| Tahap | Estimasi Waktu | Keterangan |
|-------|---------------|------------|
| Permintaan Barang | 5-10 menit | Tergantung jumlah item |
| Approval Kepala Unit | 1-2 hari | Tergantung ketersediaan |
| Verifikasi Kasubbag | 1-2 hari | Tergantung ketersediaan |
| Approval Kepala Pusat | 1-3 hari | Tergantung ketersediaan |
| Proses Disposisi | 15-30 menit | Tergantung jumlah item |
| Compile SBBK | 5-10 menit | Quick process |
| Distribusi (Kirim) | 1-3 hari | Tergantung jarak & logistik |
| Penerimaan Barang | 10-15 menit | Verifikasi fisik |
| Retur (jika ada) | 1-2 hari | Tergantung proses retur |

**Total Estimasi:** 5-12 hari kerja (tanpa retur)

---

---

## Alur Permintaan Barang â€“ Dua Cabang (Barang Ada vs Tidak Ada di Stock)

Flowchart ini memetakan alur setelah **Kasubbag TU Verifikasi** menjadi dua cabang berdasarkan ketersediaan barang di stock.

### Cabang 1: Barang ADA di Stock (Pemenuhan dari Gudang)

```
Kasubbag TU Verif â†’ Disetujui
    â†’ SPPB (Surat Perintah Pengeluaran Barang)
    â†’ Pengurus Barang (Admin Gudang)
    â†’ Dispo Gudang (Farmasi / Persediaan)
    â†’ Dokumen SBBK â†’ Distribusi
    â†’ Unit Kerja (Cek dan Terima Barang)
    â†’ Cek Fisik: Sesuai â†’ Selesai (SBBK ditandatangani, barang masuk data stock unit)
```

**Implementasi saat ini:** Setelah Kasubbag TU verifikasi, sistem membuat **disposisi ke Admin Gudang** (step 4) sesuai kategori (Persediaan/Farmasi). Admin Gudang memproses disposisi â†’ Compile SBBK â†’ Distribusi â†’ Penerimaan.

### Cabang 2: Barang TIDAK ADA di Stock (Pengadaan Barang dan Jasa)

```
SPB (Permintaan yang tidak ada di Data Stock)
    â†’ Kepala Pusat (Setuju / Tidak)
    â†’ Jika Disetujui:
        â†’ PPK (Pejabat Pembuat Komitmen) â€“ Upload Dokumen Spektek
        â†’ PPBJ (Pejabat Pengadaan Barang/Jasa) â€“ Upload Dokumen Pengadaan
        â†’ Selesai
```

**Implementasi saat ini:**

- Sistem mendeteksi item yang **tidak ada di stock** (permintaan lainnya / `id_data_barang` null, atau stock gudang pusat = 0).
- Jika ada item seperti itu, setelah Kasubbag TU verifikasi dibuat **disposisi ke Pengadaan Barang dan Jasa** (step 4 â€“ role `pengadaan`). Role Pengadaan melihat permintaan tersebut di menu **Persetujuan** dan dapat memproses pengadaan.

**Catatan:** Di flowchart, cabang pengadaan melalui **persetujuan Kepala Pusat** dulu sebelum ke PPK/PPBJ. Di sistem saat ini, disposisi ke Pengadaan dibuat langsung setelah verifikasi Kasubbag TU (tanpa step persetujuan Kepala Pusat khusus untuk pengadaan). Jika diinginkan penambahan step â€œPersetujuan Kepala Pusat untuk Disposisi ke Pengadaanâ€ sebelum item masuk ke bagian Pengadaan, dapat ditambahkan di kemudian hari.

---

**Last Updated:** 02/02/2026  
**Version:** 1.1


